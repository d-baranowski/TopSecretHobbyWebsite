
@{
    ViewBag.Title = "Index";
}

@section styles{
    @Styles.Render("~/templates/bs-ecosave/css")
    <script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.13.4.js"></script>
    <link rel="stylesheet" type="text/css" href='../../Content/displayCards.css' />
}

<div id="pre-div">
    <div id="loader">
    </div>
</div>


<div id="pageContainer" ng-app="myApp" ng-controller="myCtrl">
    <div class="darkerPic">
        <br />
        <div class="container ">
            <div style="background-color:#ffffff; padding:10px" class="searchToolBox container metalicBackground">
                <br />
                <div>
                    <input ng-model="searchBox" type="text"><br><br>
                </div>

                <div>
                    <button ng-click="typeToggler('creatureTgl')" value="Creature" class="toggleButton" id="creatureTgl">Creature</button>
                    <button ng-click="typeToggler('instantTgl')" value="Instant" class="toggleButton" id="instantTgl">Instant</button>
                    <button ng-click="typeToggler('artifactTgl')" value="Artifact" class="toggleButton" id="artifactTgl">Artifact</button>
                    <button ng-click="typeToggler('sorceryTgl')" value="Sorcery" class="toggleButton" id="sorceryTgl">Sorcery</button>
                    <button ng-click="typeToggler('landTgl')" value="Land" class="toggleButton" id="landTgl">Land</button>
                    <button ng-click="typeToggler('enchantmentTgl')" value="Enchantment" class="toggleButton" id="enchantmentTgl">Enchantment</button>
                </div>
                <div>
                    <button ng-click="colorToggler('whiteTgl')" value="White" class="toggleButton" id="whiteTgl">White</button>
                    <button ng-click="colorToggler('blueTgl')" value="Blue" class="toggleButton" id="blueTgl">Blue</button>
                    <button ng-click="colorToggler('greenTgl')" value="Green" class="toggleButton" id="greenTgl">Green</button>
                    <button ng-click="colorToggler('blackTgl')" value="Black" class="toggleButton" id="blackTgl">Black</button>
                    <button ng-click="colorToggler('redTgl')" value="Red" class="toggleButton" id="redTgl">Red</button>
                </div>

                <div>
                    <button ng-click="costToggler('oneTgl')" value="0" class="toggleButton" id="oneTgl">0 - 1</button>
                    <button ng-click="costToggler('twoTgl')" value="1" class="toggleButton" id="twoTgl">2 - 3</button>
                    <button ng-click="costToggler('threeTgl')" value="2" class="toggleButton" id="threeTgl">4 - 5</button>
                    <button ng-click="costToggler('fourTgl')" value="3" class="toggleButton" id="fourTgl">6 +</button>
                </div>

                <div>
                    <button ng-click="rarityToggler('commonTgl')" value="Common" class="toggleButton" id="commonTgl">Common</button>
                    <button ng-click="rarityToggler('uncommonTgl')" value="Uncommon" class="toggleButton" id="uncommonTgl">Uncommon</button>
                    <button ng-click="rarityToggler('rareTgl')" value="Rare" class="toggleButton" id="rareTgl">Rare</button>
                    <button ng-click="rarityToggler('mythicTgl')" value="Mythic" class="toggleButton" id="mythicTgl">Mythic</button>
                </div>

                <div>
                    <button ng-click="ownedToggler('owned')" class="toggleButton" id="owned">Owned</button>
                    <button ng-click="legalityToggler('commanderTgl')" value="Commander" class="toggleButton" id="commanderTgl">Commander</button>
                    <button ng-click="legalityToggler('legacyTgl')" value="Legacy" class="toggleButton" id="legacyTgl">Legacy</button>
                    <button ng-click="legalityToggler('vintageTgl')" value="Vintage" class="toggleButton" id="vintageTgl">Vintage</button>
                    <button ng-click="legalityToggler('standardTgl')" value="Standard" class="toggleButton" id="standardTgl">Standard</button>
                </div>

                <button ng-click="uniqueToggler('unique')" class="toggleButton" id="unique">Show variations</button>
                <button ng-click="order('Card.CardName')">Name</button>
                <button ng-click="order('Rating')">Rating</button>
                <button ng-click="order('Card.CardSet')">Set</button>
                <button ng-click="order('Card.CardArtist')">Atrist</button>
                <button ng-click="order('Card.CardCmc')">Mana Cost</button>
            </div>

            <br>

            <div id="cardDisplay" class="container metalicBackground">
                <center>
                <br />
                    <br />
                    <div id="dvCards" dir-paginate="x in data | unique: myUnique | orderBy: predicate: reverse | filter:colorFilter | filter:rarityFilter | filter:ownedFilter | filter:typeFilter  | filter:legalityFilter | filter:costFilter |filter:searchBox | itemsPerPage:16 ">
                        <div class="col-md-3" style="margin-bottom: 20px;">
                            <img ng-click="displayCardDetailsModal(x)" class="cardImage" ng-src={{x["Card"]["CardImageUrl"]}} width="223" height="310" />

                            <div class="container" id="controllers">
                                <!--Increment and Decrement Quantity in Collection-->
                                <div class="entryControlls input-group" role="group">
                                    <center>
                                        <button class="btn-quantity-up btn btn-success" ng-click="addOne(x);"><span class="glyphicon glyphicon-plus"></span></button>
                                        <span class="Quantity"><b>{{x["Quantity"]}}</b></span>
                                        <button class="btn-quantity-down btn btn-danger " ng-click="subOne(x);"><span class="glyphicon glyphicon-minus"></span></button>
                                    </center>
                                </div>

                                <!--Display community rating of card and allow user to rate card-->
                                <div class="btn-group" role="group" ng-repeat="a in range(5) track by $index">
                                    <div ng-switch="x.Rating >= $index + 1">
                                        <div ng-switch-when="true">
                                            <img src="~/img/star_full.png" ng-click="rateCard(x.Card.CardName, $index + 1, x);" class="star" />
                                        </div>
                                        <div ng-switch-when="false">
                                            <img src="~/img/star_none.png" ng-click="rateCard(x.Card.CardName, $index + 1, x);" class="star" />
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    
                    <center><nav class="pagination pagination-lg nav-justified paginatorController"><dir-pagination-controls id="paginator" on-page-change="myMethod(newPageNumber)" template-url="~/bower_components/angularUtils-pagination/dirPagination.tpl.html"></dir-pagination-controls></nav></center></center>
</div>

            


            <!-- http://www.jasonbutz.info/bootstrap-lightbox/
             http://twitter.github.io/typeahead.js/ Check this out man  -->
            <div class="modal" id="cardDetailsModal">
                <div style="width: 40%;" class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true" id="cardDetailsModalCloseButton">X</button>
                            <h2 class="modal-title" id="cardDetailsModalTitle"></h2>
                        </div>
                        <div id="cardDetailsModalBody" class="modal-body">
                            {{modalDescription}}
                        </div>

                        <div id="cardDetailsModalFooter" class="modal-footer">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section scripts{

    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/templates/bs-ecosave/")

    <link rel="stylesheet" type="text/css" href="http://www.bootstrap-switch.org/dist/css/bootstrap3/bootstrap-switch.css">
    <script type='text/javascript' src="http://www.bootstrap-switch.org/dist/js/bootstrap-switch.js"></script>


    <script type='text/javascript'>

        $(window).load(function () {
            $("input.switch").bootstrapSwitch();
        });

    </script>
    <script src="~/AngularApp/displayCardsApp.js"></script>
    <script src="~/Scripts/Cards/CardsModals.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular-animate.js"></script>
    <script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.13.4.js"></script>

}

